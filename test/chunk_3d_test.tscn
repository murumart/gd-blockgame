[gd_scene load_steps=9 format=3 uid="uid://klx8164wmk5q"]

[ext_resource type="Script" path="res://addons/simple_free_look_camera/camera.gd" id="1_8mts2"]
[ext_resource type="Script" path="res://world/chunks/chunk_loader.gd" id="2_0dstt"]
[ext_resource type="PackedScene" uid="uid://xv0bwgrtwil2" path="res://world/world.tscn" id="2_3n2ij"]
[ext_resource type="PackedScene" uid="uid://bl3q0dsg4sfcr" path="res://test/debug_ui.tscn" id="4_b72s5"]

[sub_resource type="GDScript" id="GDScript_tfr6n"]
resource_name = "3dtest"
script/source = "extends Node3D

@onready var world: World = $World


func _ready() -> void:
	pass
	#RenderingServer.viewport_set_debug_draw(get_viewport().get_viewport_rid(), RenderingServer.VIEWPORT_DEBUG_DRAW_WIREFRAME)
	#world.load_chunk(Vector3(0, 1, 0))
"

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_hhte1"]
sky_horizon_color = Color(0.64625, 0.65575, 0.67075, 1)
ground_horizon_color = Color(0.64625, 0.65575, 0.67075, 1)

[sub_resource type="Sky" id="Sky_mg2k5"]
sky_material = SubResource("ProceduralSkyMaterial_hhte1")

[sub_resource type="Environment" id="Environment_sejph"]
background_mode = 2
sky = SubResource("Sky_mg2k5")
tonemap_mode = 2
glow_enabled = true

[node name="Chunk3dTest" type="Node3D"]
script = SubResource("GDScript_tfr6n")

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_sejph")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.866023, -0.433016, 0.250001, 0, 0.499998, 0.866027, -0.500003, 0.749999, -0.43301, 0, 0, 0)
shadow_enabled = true

[node name="Camera3D" type="Camera3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 28.9502, 18.7446, 28.0943)
script = ExtResource("1_8mts2")

[node name="OmniLight3D" type="OmniLight3D" parent="Camera3D"]
shadow_enabled = true
omni_range = 12.0

[node name="ChunkLoader" type="Node3D" parent="Camera3D"]
script = ExtResource("2_0dstt")
load_distance = 4

[node name="World" parent="." node_paths=PackedStringArray("chunk_loaders") instance=ExtResource("2_3n2ij")]
chunk_loaders = [NodePath("../Camera3D/ChunkLoader")]

[node name="DebugUi" parent="." node_paths=PackedStringArray("camera") instance=ExtResource("4_b72s5")]
camera = NodePath("../Camera3D")
